{% extends 'base_detail_list.html' %}
{% block body %}
	<div class="navbar_con">
		<div class="navbar clearfix">
			<div class="subnav_con fl">
				<h1>全部商品分类</h1>
				<span></span>
				<ul class="subnav">
                    {% for t in types %}
					<li><a href="{% url 'goods:list' t.id 1 %}" class="{{ t.logo }}">{{ t.name }}</a></li>
                    {% endfor %}
				</ul>
			</div>
			<ul class="navlist fl">
{#				<li><a href="">首页</a></li>#}
{#				<li class="interval">|</li>#}
{#				<li><a href="">手机生鲜</a></li>#}
{#				<li class="interval">|</li>#}
{#				<li><a href="">抽奖</a></li>#}
			</ul>
		</div>
	</div>

	<div class="breadcrumb">
{#    商品检索词query#}
		<a href="#">{{ query }}</a>
		<span>></span>
		<a href="#">搜索结果如下：</a>
	</div>
    		<div class="l_wrap fl clearfix">
			<div class="new_goods">
				<h3>新品推荐</h3>
				<ul>
                    {% for n in new_skus %}
					<li>
						<a href="{% url 'goods:detail' n.id %}"><img src="{{ n.image.url }}"></a>
						<h4><a href="{% url 'goods:detail' n.id %}">{{ n.name }}</a></h4>
						<div class="prize">￥{{ n.price }}</div>
					</li>
                    {% endfor %}
				</ul>
			</div>
		</div>


	<div class="main_wrap clearfix">
		<div class="r_wrap fr clearfix">
{#            {% for p in page %}#}
{#                {{ p.object.id }}#}
{#            {% endfor %}#}
			<ul class="goods_type_list clearfix">
            {% for sp in page.object_list %}
				<li>
					<a href="{% url 'goods:detail' sp.object.id %}"><img src="{{ sp.object.image.url }}"></a>
					<h4><a href="{% url 'goods:detail' sp.object.id %}">{{ sp.object.name }}</a></h4>
					<div class="operate">
						<span class="prize">￥{{ sp.object.price }}</span>
						<span class="unit">{{ sp.object.price }}/{{ sp.object.units }}</span>
						<a href="#" class="add_goods" title="加入购物车"></a>
					</div>
				</li>
            {% endfor %}
			</ul>

			<div class="pagenation">
{#             page属性有上页返回True  ?sort 使得排序不变#}
                {% if  page.has_previous %}
{#                <a href="{% url 'goods:list' type.id page.previous_page_number %}?sort={{ sort }}">上一页</a>#}
                    <a href="{% url 'haystack_search' %}?q={{ query }}&page= page.previous_page_number">上一页</a>
                {% endif %}
{#                Page.paginator¶ 关联的 Paginator 对象。#}
                {% for p in paginator.page_range %}
{#                    如果是当前页class = 'active'#}
                    {% if p == page.number %}
{#				<a href="{% url 'goods:list' type.id p %}?sort={{ sort }}" class="active">{{ p }}</a>#}
                        <a  href="{% url 'haystack_search' %}?q={{ query }}&page={{ p }}" class="active">{{ p }}</a>
                    {% else %}
{#				<a href="{% url 'goods:list' type.id p %}?sort={{ sort }}">{{ p }}</a>#}
                        <a  href="{% url 'haystack_search' %}?q={{ query }}&page={{ p }}" class="active">{{ p }}</a>
                    {% endif %}
                {% endfor %}
{#            有下一页返回True#}
            {% if page.has_next %}
{#				<a href="{% url 'goods:list' type.id skus_page.next_page_number %}?sort={{ sort }}">下一页></a>#}
                <a href="{% url 'haystack_search' %}?q={{ query }}&page= page.next_page_number">下一页</a>
            {% endif %}

			</div>
		</div>
	</div>
{% endblock body %}